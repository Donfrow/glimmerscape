/*
Zorphos inside the mountain house of DeathScorn island
*/

StartOrbQuest()
{


    UI_push_answers();
    UI_add_answer("Yes");
    UI_add_answer("No");
    
    converse
    {
        if (response == "Yes")
        {
            say("Thank thee! We shall get along well.");
            gflags[ON_MAIN_QUEST] = true;
            UI_clear_answers();
			UI_pop_answers();
			break;
        }
        else if (response == "No")
        {
            say("Than leave me be.");
           	UI_clear_answers();
			UI_pop_answers();
			break;
        }
    }
    
}


Zorphos 0x41b ()
	{
var killtalk;
var has_soul_orb = UI_count_objects(PARTY, ORB_OF_SOULS, ANY, ANY);

	if (event == 0)
		{
		if (UI_get_schedule_type(item) == 14)
			{
			UI_item_say(item, "Zzzz");
			return;
			}
		else
			{
			var n = UI_get_random(2);// 1-2.
			if (n == 1)
				UI_item_say(item, "I must discover its secrets");
			else if (n == 2)
				UI_item_say(item, "Blasted orbs");
			}
		}
	if (event != 1)
		return;
	UI_show_npc_face(item);

if (UI_get_item_flag(item, MET)) 
	{
		say("Thee again I see.");
			if (gflags[NICE_ZORPHOS])
			{
			UI_add_answer("Orb of Infinity");
			}
	}
else
	{

		say("What dost thou want?");
		UI_set_item_flag(item, MET, true);
	}
// End MET Flag


if (has_soul_orb > 0) // IF YOU POSSESS THE ORB OF SOULS
	{
	UI_add_answer("I hath the Orb of Souls");


			if (gflags[TALKED_TO_ZOMBIE_SON]) // TALKED TO THE SON WHILE HOLDING THE ORB

				{
					UI_remove_answer("I hath the Orb of Souls");
					UI_add_answer("Orb of Chaos");
				}

	} // End bracket for has_soul_orb if statement



		UI_add_answer("Name");
		UI_add_answer("Job");
		UI_add_answer("Bye");	
		converse
		{


// THIS FLAG HERE WILL HAVE HIM BE MORE KIND TO YOU AND WORK WITH YOU - Occurs after talking to him with gflag read_orb_book set (reading book quality 11)

if (gflags[NICE_ZORPHOS])

	{

	if (response == "Bye")
		{
		say("Fare well and safe journey.");
		break;
		}
	else if (response == "Job")
		{
		say("I still continue my research about the Orb of Infinity.");
		UI_remove_answer("Job");

		}
	else if (response == "Orb of Infinity")
		{
		say("We must find all five minor orbs. It is my belief that the Orb of Souls can help ease the torment of my son and the other undead, but they will not actually be free until the orbs are combined into the Orb of Infinity once more.");
		say("At that point I believe the Orb of Infinity can be destroyed and the restless souls can be truely set free.");
		if (gflags[ON_MAIN_QUEST])
           {
           }
        else
           {		
            say("Wilt thou help me with this task?");
            StartOrbQuest();
            
               if (gflags[ON_MAIN_QUEST]) // This is if you say yes
              {
              }
                 else // If you say no to StartOrbQuest it will then kill this convo overall
               {
                break;
               }
            
           }
        
		UI_remove_answer("Orb of Infinity");
		UI_add_answer("Orb of Souls");
		UI_add_answer("Minor orbs");
	
		}
	else if (response == "Orb of Souls")
		{
		say("From what I hath learned as long as the Orb of Souls exists when one dies they art unable to fully pass from the land of the living.");
		say("Although not all those who pass return as ghosts or undead, their essence or their soul remains in a state of unlife and undeath.");
		say("This also explains why Seance type spells do not work for anyone who hath died since the orbs creation.");
		say("Imagine, thousands of years worth of souls in a state of limbo.");
		UI_remove_answer("Orb of Souls");
		}
	else if (response == "Minor orbs")
		{
		say("I suggest thou seek out Polyphemus on Kintore Island for information on the other orbs. Since I discovered the Orb of Souls to be real my focus hath been there.");
		say("I last saw him on the northern part of the island. If thou find him, tell him that I hath sent you.");
		say("Hopefully thee can gather enough information from him to know where to begin searching for the other minor orbs.");
		gflags[TALK_TO_CYCLOPS] = true;
		UI_remove_answer("Minor orbs");
		}
	else if (response == "I hath the Orb of Souls") // COMES INTO PLAY IF YOU HAVE ORB IN YOUR PARTY
		{
		say("It is wonderful to hear thou hath recovered the orb. Thou should try speaking to my undead son. Perhaps the orb will have an effect on his tortured soul.");
		UI_add_answer("Why talk to him?");
		UI_remove_answer("I hath the Orb of Souls");
		}
	else if (response == "Why talk to him?")
		{
		say("In order to fully set my his soul free we must recreate the Orb of Infinity. It is my hope in his state he can communicate with the other souls in limbo.");
		say("If this is possible we perhaps we can use him to learn information regarding the other orbs.");
		gflags[TALK_TO_ZOMBIE_SON] = true;
		UI_remove_answer("Why talk to him?");
		}

	else if (response == "Orb of Chaos") // Comes into effect after talking to the zombie son with orb
		{
		say("My son hath mentioned to seek out those who mine? That could only mean the Solusek Mining Company.");
		say("Thou should visit their headquarters on Solusek Island to see if thou can discover anything. I will begin to study on how to bind the orbs into the Orb of Infinity once we possess the other orbs.");
		UI_remove_answer("Orb of Chaos");
		UI_add_answer("Other orbs");
		}
	else if (response == "Other orbs")
		{
		  say("Thee already know where to search for the Orb of Chaos and Transfiguration. I suggest you speak to Polyphemus to see about the remaining orbs.");
		  gflags[TALK_TO_CYCLOPS] = true;
		UI_remove_answer("Other orbs");
		}

	}
	
	else

	{

	if (response == "Bye")
			{
			say("Begone.");
			
			break;
			}
		else if (response == "Name")
			{
			say("I am Zorphos though I know not why I tell thee that.");
			UI_remove_answer("Name");
			}
		else if (response == "Job")
			{
			say("I research ancient and powerful artifacts. Now if thou do not have anything to talk to me about, please be on thy way.");
			UI_remove_answer("Job");

		
			if (gflags[READ_ORB_BOOK]) // If you read the orb book that is spawned in Dewtopia
				{
				UI_add_answer("Orb of Infinity");
				}
			}
		else if (response == "Orb of Infinity")
			{

			say("I did write a book on the Orb of Infinity but why do you seek me out when thou can simply read my book?");
			UI_remove_answer("Orb of Infinity");
			UI_add_answer("Need more information");

			}
		else if (response == "Need more information")
			{
			say("Need more information do ye? Well, I hath learned much since I wrote about the orb, but I do not know why I should tell thee.");
			UI_add_answer("Goblins have an orb");
			UI_remove_answer("Need more information");
			}

		else if (response == "Goblins have an orb")
			{
			say("This is most troubling. As I hath mentioned much has been learned since my book was written. I now believe all five of the minor orbs actually exist.");
			
			UI_add_answer("Why dost thou believe?");
			UI_remove_answer("Goblins have an orb");
			
			}



		else if (response == "Why dost thou believe?")
			{
			say("My son, which I keep locked up here in my home as an undead, was slain in a battle with the Dark Monks of Kintore.");
			say("While I was retrieving his then lifeless body I stumbled across a cyclops on Kintore.");
			UI_remove_answer("Why dost thou believe?");
			UI_add_answer("Cyclops");
			}

		else if (response == "Cyclops")
			{
			say("I had expected the cyclops, known as Polyphemus, to slay and eat me, but it seems the cyclops race are surprisingly gentle unless provoked.");
			say("They are very intelligent creatures it would seem and are capable of incredibly thought provoking conversation.");
			say("It turns out that a cyclops can live for thousands of years, but not only that, the race itself is a creation of the Orb of Transfiguration.");
			say("It seems that during the experiments to create the Orb of Infinity the MageLord Akakothen created the cyclops race.");
			say("As a result they are knowledgable about the Orb of Infinity and the minor orbs.");
			UI_add_answer("How is this proof?");
			UI_add_answer("Minor orbs");
			UI_remove_answer("Cyclops");
			}
		else if (response == "How is this proof?")
			{
			say("This cyclops actually had in his possession the Orb of Souls. It seems that he was tasked with guarding the orb.");
			say("Unfortunately the Dark Monks, whom rever in the legend of the Orb of Souls and other dark magic discovered this and attacked.");
			say("Poor Polyphemus was gravely injured in the battle and lost possession of the orb to the monks. He yet lives, but now remains on Kintore Island feeling as though he hath failed in his duty.");
			say("Regardless, now knowing that three of the five orbs actually exist, and what Polyphemus hath told me it is only logical that the other two orbs doth exist as well.");
			say("It is also my hope that if I can retrieve the Orb of Souls I can return my son to how he was, instead of the heartless, mindless creature he hath become.");
			say("");
			gflags[NICE_ZORPHOS] = true;
			UI_remove_answer("How is this proof?");
			}
		else if (response == "Minor orbs")
			{

			say("I suggest thou seek out Polyphemus on Kintore Island for information on the other orbs. Since I discovered the Orb of Souls to be real I hath put all my research into that.");
			say("I last saw him on the northern part of the island. If thou find him, tell him that I hath sent you.");
			UI_remove_answer("Minor orbs");
			gflags[TALK_TO_CYCLOPS] = true;
			
			}

		} // End bracket for else statement from gflags of nice zorphos
		}
	UI_remove_npc_face(item);
	}

